import{u as e,y as l,k as a,g as t,c as s,l as u,m as r,a as c,d as o,t as n,e as i,i as d,z as v,G as p,F as m,q as f,j as y,B as x,H as S,n as w,v as b,I as h,o as k}from"./vendor.5e620042.js";import{i as P,h as g,j as A,k as C,d as I,a as L}from"./index.647400d6.js";const N={class:"mainPaddingX"},_={class:"flex flex-wrap py-4 text-4xl text-title-h1"},T={class:"mr-5 mb-1"},M={class:"w-full shadow myBorder text-white"},$={class:"flex items-center p-5 sm:p-4 titleStyle border-b text-xl"},j=o("i",{class:"pe-7s-ticket pe-lg pe-va"},null,-1),E={class:"ml-2"},B={class:"w-full text-sm p-5 sm:p-4"},O={class:"mb-5 grid grid-cols-5 xl:grid-cols-4 lg:grid-cols-3 md:grid-cols-2 sm:grid-cols-1 gap-4"},D={for:"title",class:"pl-2 mb-1 block"},G={key:0,class:"text-green-400"},U={key:1,class:"text-red-600"},q={key:2},V={for:"pin",class:"pl-2 mb-1 block"},H={key:0},J={key:1},F={key:2,class:"text-green-400"},R={key:3,class:"text-red-600"},W={for:"lowerlimit",class:"pl-2 mb-1 block"},X={key:0},z={key:1},K={key:2,class:"text-green-400"},Y={key:3,class:"text-red-600"},Q={for:"upperlimit",class:"pl-2 mb-1 block"},Z={key:0},ee={key:1},le={key:2,class:"text-green-400"},ae={key:3,class:"text-red-600"},te={for:"cut",class:"pl-2 mb-1 block"},se={key:0},ue={key:1},re={key:2,class:"text-green-400"},ce={key:3,class:"text-red-600"},oe={for:"multiple",class:"pl-2 mb-1 block"},ne={key:0,class:"text-green-400"},ie={key:1,class:"text-red-600"},de={for:"description",class:"pl-2 mb-1 block"},ve={key:0,class:"text-green-400"},pe={key:1,class:"text-red-600"},me={value:void 0,disabled:"",hidden:""},fe=["value"],ye={class:"pl-2 mb-1"},xe=["onClick"],Se={for:"isProcessMajor",class:"w-full"},we={class:"w-full pl-2"},be=[o("i",{class:"pe-7s-close pe-2x pe-va"},null,-1)],he={class:"flex flex-wrap"},ke={class:"flex"},Pe={class:"hidden sm:block mb-2"},ge={value:void 0,disabled:"",hidden:""},Ae={value:"",disabled:"",hidden:""},Ce=["value"],Ie={class:"sm:hidden px-5 sm:px-4 flex flex-wrap text-sm"},Le={class:"mb-2 flex w-full text-white tableThStyle"},Ne={class:"w-full flex"},_e={class:"w-full flex"},Te={class:"w-full text-center overflow-hidden"},Me={class:"w-full text-center overflow-hidden"},$e={class:"w-full text-center overflow-hidden"},je={class:"w-full text-center overflow-hidden"},Ee={class:"w-full text-center overflow-hidden"},Be={class:"w-full text-center overflow-hidden"},Oe={class:"w-full text-center overflow-hidden"},De={class:"w-full text-center overflow-hidden"},Ge={class:"w-full text-center overflow-hidden"},Ue={class:"w-full"},qe=["onClick"],Ve={class:"w-full flex justify-center items-center"},He={class:"w-full flex justify-center items-center"},Je={class:"w-full flex justify-center items-center"},Fe={class:"w-full flex justify-center items-center"},Re={class:"w-full flex justify-center items-center"},We={class:"w-full flex justify-center items-center"},Xe={class:"w-full flex justify-center items-center"},ze={class:"w-full flex justify-center items-center"},Ke={class:"w-full flex justify-center items-center"},Ye={props:{dateNow:String},setup(Ye){const Qe=Ye,Ze=e(),el=l(),ll=a(),al=t(),tl=s((()=>al.locale.value)),sl=s((()=>Ze.state.resData.token)),ul=s((()=>Ze.state.serverURL)),rl=s((()=>el.query.productId)),cl=s((()=>el.query.processId)),ol=s((()=>JSON.parse(sessionStorage.getItem("processNameArray")||"[]"))),nl=s((()=>P(tl.value))),il=(e=0)=>{let l=Number(e);return l&&l!=1/0||(l=0),l},dl=u(""),vl=u(0),pl=u(0),ml=u(0),fl=u(0),yl=u(void 0),xl=u(0),Sl=u(!1),wl=s((()=>Sl.value?1:0)),bl=u(""),hl=u(!0),kl=()=>{if(!dl.value)return hl.value=void 0;let e=ol.value.find((e=>e==dl.value.trim()));if(e==bl.value)return hl.value=!0;hl.value=!e},Pl=u(!0),gl=()=>{if(!Pl.value){let e=g(tl.value).notAllowDeletingMajorProcess;return alert(e)}Sl.value=!Sl.value},Al=u(!1),Cl=()=>{let e={name:"ProductSetEdit",query:{productId:rl.value}};Qe.dateNow&&(e.params={dateNow:JSON.stringify(new Date)}),Al.value&&(e.params={processName:dl.value,dateNow:JSON.stringify(new Date)}),ll.push(e)};(()=>{let e=Ze.state.fakeData.productSetEdit[rl.value];if(e){let l=e.processList.find((e=>(null==e?void 0:e.processId)==cl.value));l&&(dl.value=l.processName||"",vl.value=il(l.processStitch),pl.value=il(l.processStitchM),ml.value=il(l.processStitchP),fl.value=il(l.processCut),(Number(l.processType)||0==Number(l.processType))&&(yl.value=il(l.processType)),xl.value=il(l.processGSD),bl.value=dl.value,Sl.value=1==il(l.processMajor),Pl.value=!Sl.value)}})();const Il=(Ll=!1,()=>{let e=A(tl.value);if(!hl.value){let l=e.processName;return alert(l)}if(xl.value<=0){let l=e.processGSD;return alert(l)}if(Ll);else{let e=()=>{Ll=!0;let e=Ze.state.fakeData.productSetEdit[rl.value];if(e){let l=e.processList.find((e=>(null==e?void 0:e.processId)==cl.value));if(l){l.processName=dl.value.trim(),l.processStitch=vl.value,l.processStitchM=pl.value,l.processStitchP=ml.value,l.processCut=fl.value,l.processTimes=1,l.processStdTime=0,l.processType=yl.value,l.processGSD=xl.value,l.processMajor=wl.value,l.processTypeTranslation=nl.value[yl.value]||"",Al.value=!0;let e=L(tl.value).saveSuccess;alert(e)}}Ll=!1},l={processType:yl.value,processCut:fl.value,processStitch:vl.value,processStitchM:pl.value,processStitchP:ml.value,language:tl.value};C(l,e)}});var Ll;const Nl=u(!1),_l=u([]),Tl=u(""),Ml=()=>{if(Nl.value=!Nl.value,Nl.value){let e=new FormData;e.append("token",sl.value),h.post(`http://${ul.value}/catchSample.php`,e).then((e=>{I(e.data),1==e.data.status?Array.isArray(e.data.data)&&(_l.value=e.data.data):2==e.data.status?Ze.dispatch("tokenCheckFail"):3==e.data.status?(Tl.value=void 0,_l.value=[],console.warn("status 3")):console.warn("else")})).catch((e=>{console.error("error")}))}},$l=e=>{vl.value=il(_l.value[e].mean),pl.value=il(_l.value[e].sdv_max),ml.value=Math.abs(il(_l.value[e].sdv_min))};return r((()=>Tl.value),(e=>{(e||0==e)&&$l(e)})),(e,l)=>(k(),c("main",N,[o("h1",_,[o("span",T,n(e.$t("ProductSetEditNext.PSEN_TITLE")),1),o("button",{class:"mb-1 btn btnBlueColor",onClick:Cl},n(e.$t("GLOBAL.GLOBAL_BACK")),1)]),o("div",M,[o("section",$,[j,o("span",E,n(e.$t("GLOBAL.GLOBAL_LIST")),1)]),o("section",B,[o("form",O,[o("div",null,[o("label",D,[i(n(e.$t("ProductSetEditNext.PSEN_NAME"))+" ",1),hl.value?(k(),c("span",G,"✔")):0==hl.value?(k(),c("span",U,"✖")):(k(),c("span",q))]),d(o("input",{type:"text",id:"title",class:"myInput w-full","onUpdate:modelValue":l[0]||(l[0]=e=>dl.value=e),onChange:kl,required:""},null,544),[[v,dl.value]])]),o("div",null,[o("label",V,[i(n(e.$t("ProductSetAdd.PSA_STITCH"))+" ",1),null==yl.value?(k(),c("span",H)):0!=yl.value&&2!=yl.value?(k(),c("span",J)):vl.value>0?(k(),c("span",F,"✔")):(k(),c("span",R,"✖"))]),d(o("input",{type:"number",id:"pin",min:"0",step:"1",class:"myInput w-full","onUpdate:modelValue":l[1]||(l[1]=e=>vl.value=e),required:""},null,512),[[v,vl.value]])]),o("div",null,[o("label",W,[i(n(e.$t("ProductSetAdd.PSA_STITCHLOWLIM"))+" ",1),null==yl.value?(k(),c("span",X)):2!=yl.value?(k(),c("span",z)):pl.value>0?(k(),c("span",K,"✔")):(k(),c("span",Y,"✖"))]),d(o("input",{type:"number",id:"lowerlimit",min:"0",step:"1",class:"myInput w-full","onUpdate:modelValue":l[2]||(l[2]=e=>pl.value=e),required:""},null,512),[[v,pl.value]])]),o("div",null,[o("label",Q,[i(n(e.$t("ProductSetAdd.PSA_STITCHUPLIM"))+" ",1),null==yl.value?(k(),c("span",Z)):2!=yl.value?(k(),c("span",ee)):ml.value>0?(k(),c("span",le,"✔")):(k(),c("span",ae,"✖"))]),d(o("input",{type:"number",id:"upperlimit",min:"0",step:"1",class:"myInput w-full","onUpdate:modelValue":l[3]||(l[3]=e=>ml.value=e),required:""},null,512),[[v,ml.value]])]),o("div",null,[o("label",te,[i(n(e.$t("ProductSetAdd.PSA_TRIM"))+" ",1),null==yl.value?(k(),c("span",se)):1!=yl.value&&2!=yl.value?(k(),c("span",ue)):fl.value>0?(k(),c("span",re,"✔")):(k(),c("span",ce,"✖"))]),d(o("input",{type:"number",id:"cut",min:"0",step:"1",class:"myInput w-full","onUpdate:modelValue":l[4]||(l[4]=e=>fl.value=e),required:""},null,512),[[v,fl.value]])]),o("div",null,[o("label",oe,[i(n(e.$t("ProductSetAdd.PSA_GSD"))+" ",1),xl.value>0?(k(),c("span",ne,"✔")):(k(),c("span",ie,"✖"))]),d(o("input",{type:"number",id:"multiple",min:"0",step:"0.1",class:"myInput w-full","onUpdate:modelValue":l[5]||(l[5]=e=>xl.value=e),required:""},null,512),[[v,xl.value]])]),o("div",null,[o("label",de,[i(n(e.$t("ProductSetAdd.PSA_CAL"))+" ",1),null!=yl.value?(k(),c("span",ve,"✔")):(k(),c("span",pe,"✖"))]),d(o("select",{class:"w-full myInputPopupSearch","onUpdate:modelValue":l[6]||(l[6]=e=>yl.value=e)},[o("option",me,n(e.$t("ProductMachine.PM_SELECT")),1),(k(!0),c(m,null,f(y(nl),((e,l)=>(k(),c("option",{key:"processTypeArray"+l,value:l},n(e),9,fe)))),128))],512),[[p,yl.value]])]),o("div",null,[o("div",ye,n(e.$t("ProductSetAdd.PSA_MAJOR")),1),o("div",{class:"relative w-20 cursor-pointer",onClick:x(gl,["prevent"])},[o("label",Se,[d(o("input",{id:"isProcessMajor",type:"checkbox","onUpdate:modelValue":l[7]||(l[7]=e=>Sl.value=e),class:"hidden w-full h-full"},null,512),[[S,Sl.value]]),o("div",{class:w(["myInputPopup w-full flex justify-between items-center rounded-full",[Sl.value?"majorBorder":""]])},[o("div",we,[o("div",{class:w(["w-4 h-0.5 rounded-full transform -rotate-45",[Sl.value?"majorBg":"bg-gray-400"]])},[o("div",{class:w(["w-1/2 h-full rounded-full transform origin-left translate-x-px -rotate-90",[Sl.value?"majorBg":"bg-gray-400"]])},null,2)],2)]),o("div",{class:w(["w-full",[Sl.value?"majorText":"text-gray-400"]])},be,2)],2)]),o("div",{class:w(["absolute top-0 left-0 duration-1000 p-1 w-1/2 h-full",[Sl.value?"transform translate-x-full":""]])},[o("div",{class:w(["w-full h-full rounded-full border-4",[Sl.value?"majorBg border-gray-200 border-opacity-30":"bg-gray-400 border-gray-500 border-opacity-50"]])},null,2)],2)],8,xe)])]),o("article",he,[o("button",{class:"mr-2 mb-2 btn btnBlueColor",onClick:l[8]||(l[8]=(...e)=>y(Il)&&y(Il)(...e))},n(e.$t("GLOBAL.GLOBAL_SAVE")),1),o("div",ke,[o("button",{class:"btn btnYellowColor mb-2 sm:mr-2",onClick:Ml},n(e.$t("ProductSetEditNext.PSEN_SAMPLE")),1),d(o("div",Pe,[d(o("select",{class:"myInputPopupSearch w-40 sm:w-28","onUpdate:modelValue":l[9]||(l[9]=e=>Tl.value=e)},[o("option",ge,n(e.$t("ProductSetEditNext.PSEN_NO_DATA")),1),o("option",Ae,n(e.$t("ProductMachine.PM_SELECT")),1),(k(!0),c(m,null,f(_l.value,((e,l)=>(k(),c("option",{key:"sampleData"+l,value:l},n(e.machine),9,Ce)))),128))],512),[[p,Tl.value]])],512),[[b,Nl.value]])])])]),d(o("section",Ie,[o("div",Le,[o("div",Ne,[o("div",_e,[o("div",Te,n(e.$t("GLOBAL.GLOBAL_MACHINE")),1),o("div",Me,n(e.$t("CatchSample.SP_MODE")),1),o("div",$e,n(e.$t("CatchSample.SP_MEDIAN")),1),o("div",je,n(e.$t("CatchSample.SP_MEAN")),1),o("div",Ee,n(e.$t("CatchSample.SP_MAX")),1),o("div",Be,n(e.$t("CatchSample.SP_MIN")),1),o("div",Oe,n(e.$t("CatchSample.SP_STITCHUPLIM")),1),o("div",De,n(e.$t("CatchSample.SP_STITCHLOWLIM")),1),o("div",Ge,n(e.$t("CatchSample.SP_NO")),1)])])]),o("div",Ue,[(k(!0),c(m,null,f(_l.value,((e,l)=>(k(),c("div",{key:"sampleData"+l,class:"mb-2 flex flex-row-reverse tableHover text-white border-t border-gray-800 rounded"},[o("div",{class:"py-1 w-full flex cursor-pointer",onClick:x((e=>$l(l)),["prevent"])},[o("div",Ve,n(e.machine),1),o("div",He,n(e.mode),1),o("div",Je,n(e.median),1),o("div",Fe,n(e.mean),1),o("div",Re,n(e.max),1),o("div",We,n(e.min),1),o("div",Xe,n(e.sdv_max),1),o("div",ze,n(e.sdv_min),1),o("div",Ke,n(e.no),1)],8,qe)])))),128))])],512),[[b,Nl.value]])])]))}};export{Ye as default};
