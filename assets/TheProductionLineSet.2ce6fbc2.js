import{S as e,k as l,u as t,g as a,c as n,l as s,J as i,m as o,r as c,a as u,d as r,t as d,i as v,z as p,W as g,B as m,e as f,f as h,F as w,q as y,s as L,x,o as b,n as C,b as k,w as A,j as N}from"./vendor.5e620042.js";import{_ as P,P as S,g as I,e as E,s as D,S as O,a as T}from"./index.4332a85f.js";const B=e=>(L("data-v-3891c34d"),e=e(),x(),e),_={class:"mainPaddingX"},$={class:"py-4 text-4xl text-title-h1"},j={class:"w-full shadow"},G={class:"flex sm:flex-wrap items-center justify-between h-16 sm:h-auto py-4 px-8 sm:px-4 titleStyle myBorder mb-4"},R={class:"flex items-center text-xl sm:mb-1"},U=B((()=>r("i",{class:"pe-7s-note2 pe-lg pe-va"},null,-1))),F={class:"ml-3 mr-1"},W={class:"relative -top-px"},H={class:"flex sm:flex-row-reverse"},M={class:"px-8 sm:px-2 py-6 sm:py-4 text-white text-sm myBorder"},J={class:"flex sm:flex-wrap items-center justify-between mb-4 w-full text-gray-500"},q={class:"flex items-center mb-1"},K=["placeholder"],z={class:"flex lg:flex-wrap justify-between my-4"},V={class:"w-full lg:w-auto lg:mb-2 flex items-center"},X={class:"mr-1"},Q=["min"],Y={class:"w-full lg:w-auto lg:mb-2 flex items-center flex-row-reverse"},Z=["onClick"],ee=[B((()=>r("i",{class:"pe-7s-angle-right pe-2x pe-va pe-fw"},null,-1)))],le={class:"bg-white px-2 py-1 bg-opacity-5 rounded"},te=B((()=>r("span",{class:"mx-1"},"/",-1))),ae=["onClick"],ne=[B((()=>r("i",{class:"pe-7s-angle-left pe-2x pe-va pe-fw"},null,-1)))],se={class:"lg:hidden mb-2 flex w-full text-white tableThStyle"},ie={class:"w-full flex"},oe={class:"w-10/12 flex"},ce=B((()=>r("div",{class:"lg:hidden w-2/12 text-center overflow-hidden"},null,-1))),ue={key:0,class:"pl-1"},re={key:1,class:"pe-7s-angle-down pe-lg pe-va"},de={key:2,class:"pe-7s-angle-up pe-lg pe-va"},ve={key:0,class:"pl-1"},pe={key:1,class:"pe-7s-angle-down pe-lg pe-va"},ge={key:2,class:"pe-7s-angle-up pe-lg pe-va"},me={key:0,class:"pl-1"},fe={key:1,class:"pe-7s-angle-down pe-lg pe-va"},he={key:2,class:"pe-7s-angle-up pe-lg pe-va"},we={class:"w-2/12 text-center overflow-hidden"},ye={class:"w-1/12 text-center overflow-hidden"},Le={class:"w-full"},xe={class:"w-1/12 lg:w-full py-2 lg:pt-0 lg:px-4 flex justify-center lg:justify-between"},be={class:"hidden lg:block w-2/12 text-lg"},Ce={class:"w-full flex justify-center lg:justify-end"},ke=["onClick"],Ae={class:"w-full flex lg:block"},Ne=["onClick"],Pe={class:"lg:hidden w-2/12 flex justify-end items-center"},Se={class:"theWidth flex lg:block lg:px-4 justify-center items-center"},Ie={class:"hidden lg:inline-block mr-1"},Ee={class:"theWidth flex lg:block lg:px-4 justify-center items-center"},De={class:"hidden lg:inline-block mr-1"},Oe={class:"theWidth flex lg:block lg:px-4 justify-center items-center"},Te={class:"hidden lg:inline-block mr-1"},Be={class:"w-2/12 lg:w-full lg:px-4 lg:my-3 flex lg:block justify-center items-center lg:text-lg"},_e={class:"hidden lg:inline-block mr-1"},$e={class:"relative"},je=["onClick"],Ge=B((()=>r("i",{class:"pe-7s-angle-down pe-lg pe-va"},null,-1))),Re={key:0},Ue={class:"productChangeBox bg-white border text-black border-gray-800 rounded shadow"},Fe={key:0,class:"p-2 min-w-max text-center"},We={key:0,class:"py-px hover:bg-gray-400 cursor-pointer"},He={key:1,class:"p-2 min-w-max text-center"},Me={class:"w-full"},Je={class:"py-px w-full text-center cursor-text"};var qe=P({props:{lineId:String},setup(L){const x=L;e((e=>({"3df06ab0":N(fl)})));const P=l(),B=t(),qe=a(),Ke=n((()=>qe.locale.value));n((()=>B.state.resData.token)),n((()=>B.state.serverURL));const ze=n((()=>{let e=JSON.parse(sessionStorage.getItem("lineListSetting")||"0");return Number(e)||25})),Ve=E().isObject,Xe=s(0),Qe=s([]),Ye=s({}),Ze=s([]),el=s(""),ll=s(new S({rightNowPage:1,amountData:ze.value,minAmountData:10})),tl=()=>{ll.value.previous(),Ze.value=ll.value.getListByPage()},al=()=>{ll.value.next(),Ze.value=ll.value.getListByPage()},nl=()=>{let e=Number(ll.value.amountData);(!e||e==1/0||e>Xe.value)&&(e=Xe.value),e<ll.value.minAmountData&&(e=ll.value.minAmountData),ll.value.amountData=e,rl(),sessionStorage.setItem("lineListSetting",JSON.stringify(e))},sl=s(new O),il=sl.value.sortingFunction();sl.value.setKeys(["lineName","nowProduct","machineTotal"]);const ol=(e=[])=>{ll.value.set({searchedeAndSortedListCopy:e}),Ze.value=ll.value.getListByPage()};sl.value.setFunction("Initial",(()=>{let e=il.Initial(el.value,Qe.value,"lineName"),l=vl(e);ol(l)})),sl.value.setFunction("ASC",((e="")=>{let l=il.ASC(ll.value.searchedeAndSortedListCopy,e,!0);ol(l)})),sl.value.setFunction("DESC",((e="")=>{let l=il.DESC(ll.value.searchedeAndSortedListCopy,e,!0);ol(l)}));const cl=(e="")=>{ll.value.set({rightNowPage:1}),sl.value.sort(e)},ul=()=>{sl.value.KeepTheSortingRuleAndFilter(),Xe.value=ll.value.searchedeAndSortedListCopy.length},rl=(e=!0)=>{e&&(sl.value.sort("else",!1),ll.value.set({rightNowPage:1}));let l=D(el.value,Qe.value,"lineName"),t=vl(l);ll.value.set({searchedeAndSortedListCopy:t}),Ze.value=ll.value.getListByPage(),Xe.value=t.length},dl=()=>{el.value="",rl()},vl=(e=Qe.value)=>{if(!Array.isArray(e)||0==e.length)return[];let l=I(e);return l.map((e=>{e.isShowProductChange=!1;let l={clpId:[],productName:[],clpIdLength:0};Ve(e.productChange)&&(l.clpId=Object.keys(e.productChange),l.productName=Object.values(e.productChange),l.theLength=l.clpId.length),e.ProductChange=l})),l},pl=function(e=(()=>{})){let l=B.state.fakeData.theProductionLineSet;Xe.value=l.lineTotal||0,Ve(l.adminList)&&(Ye.value=l.adminList),Array.isArray(l.list)&&(Qe.value=I(l.list));let t=vl(Qe.value);ll.value.set({searchedeAndSortedListCopy:t}),Ze.value=ll.value.getListByPage(),e()};pl();const gl=()=>{Ze.value.map((e=>{e.isShowProductChange=!1}))};i((()=>{window.addEventListener("click",(()=>gl()))}));const ml=()=>{let e=JSON.stringify(Ye.value);B.commit("onPopupOtherData",e),B.commit("onPopupForm","productionLine")},fl=n((()=>"en"==Ke.value?"-32px":"-40px"));return o((()=>x.lineId),(e=>{pl(),dl()})),(e,l)=>{const t=c("router-link");return b(),u("main",_,[r("h1",$,d(e.$t("Line.LINE_SETTING")),1),r("div",j,[r("div",G,[r("div",R,[U,r("span",F,d(e.$t("GLOBAL.GLOBAL_LIST")),1),r("span",W,"("+d(Xe.value)+")",1)]),r("div",H,[r("button",{type:"button",class:"btn btnBlueColor",onClick:ml},d(e.$t("GLOBAL.GLOBAL_ADD")),1)])]),r("div",M,[r("div",J,[r("div",q,[v(r("input",{type:"text",class:"myInput rounded-r-none w-60 sm:w-auto text-gray-500",placeholder:e.$t("Line.LINE_NAMEFORNEWLINE"),"onUpdate:modelValue":l[0]||(l[0]=e=>el.value=e)},null,8,K),[[p,el.value]]),r("button",{type:"button",class:"btn btnSearchColor",onClick:rl},d(e.$t("Product.PRO_SEARCHBTN")),1)]),r("button",{type:"button",class:"btn btnBlueColor mb-1",onClick:dl},d(e.$t("Product.PRO_SHOWALL")),1)]),r("div",z,[r("div",V,[r("label",X,d(e.$t("MachineList.MLIST_AMOUNT_DATA"))+" :",1),v(r("input",{type:"number",min:ll.value.minAmountData,step:"1",class:"myInput w-16 text-center","onUpdate:modelValue":l[1]||(l[1]=e=>ll.value.amountData=e),onChange:nl,onKeypress:l[2]||(l[2]=g(m((()=>{}),["prevent"]),["enter"]))},null,40,Q),[[p,ll.value.amountData,void 0,{lazy:!0}]])]),r("div",Y,[r("button",{onClick:m(al,["prevent"])},ee,8,Z),r("div",le,[r("span",null,d(ll.value.rightNowPage),1),te,r("span",null,d(ll.value.totalPage),1)]),r("button",{onClick:m(tl,["prevent"])},ne,8,ae),r("span",null,d(e.$t("LineBalance.LB_PROCESSINFO_PAGES"))+":",1)])]),r("div",se,[r("div",ie,[r("div",oe,[ce,r("div",{class:"w-full text-center overflow-hidden",onClick:l[3]||(l[3]=e=>cl("lineName"))},[f(d(e.$t("Line.LINE_LINE"))+" ",1),"Initial"==sl.value.info.lineName.direction?(b(),u("span",ue,"↕")):h("",!0),"ASC"==sl.value.info.lineName.direction?(b(),u("i",re)):h("",!0),"DESC"==sl.value.info.lineName.direction?(b(),u("i",de)):h("",!0)]),r("div",{class:"w-full text-center overflow-hidden",onClick:l[4]||(l[4]=e=>cl("nowProduct"))},[f(d(e.$t("Line.LINE_NOWPRODUCT"))+" ",1),"Initial"==sl.value.info.nowProduct.direction?(b(),u("span",ve,"↕")):h("",!0),"ASC"==sl.value.info.nowProduct.direction?(b(),u("i",pe)):h("",!0),"DESC"==sl.value.info.nowProduct.direction?(b(),u("i",ge)):h("",!0)]),r("div",{class:"w-full text-center overflow-hidden",onClick:l[5]||(l[5]=e=>cl("machineTotal"))},[f(d(e.$t("Line.LINE_MACHINETOTAL"))+" ",1),"Initial"==sl.value.info.machineTotal.direction?(b(),u("span",me,"↕")):h("",!0),"ASC"==sl.value.info.machineTotal.direction?(b(),u("i",fe)):h("",!0),"DESC"==sl.value.info.machineTotal.direction?(b(),u("i",he)):h("",!0)])]),r("div",we,d(e.$t("Line.LINE_PRODUCTUPDATE")),1)]),r("div",ye,d(e.$t("GLOBAL.GLOBAL_DELETE")),1)]),r("div",Le,[(b(!0),u(w,null,y(Ze.value,((l,a)=>(b(),u("div",{key:a,class:C([[l.lineId==x.lineId?"isNewBgColor":""],"mb-2 lg:py-5 flex lg:block flex-row-reverse tableHover text-white border-t lg:shadow-lg border-gray-800 rounded"])},[r("div",xe,[r("div",be,d((ll.value.rightNowPage-1)*ll.value.amountData+a+1)+". ",1),r("div",Ce,[r("button",{type:"button",class:"btn btnRedColor",onClick:e=>(e=>{let l=T(Ke.value),t=l.confirmDelete;if(1!=confirm(t));else{let t=B.state.fakeData.theProductionLineSet.list.findIndex((l=>(null==l?void 0:l.lineId)==e));if(t>=0){B.state.fakeData.theProductionLineSet.list.splice(t,1);let e=l.deleteSuccess;alert(e),pl(ul)}}})(l.lineId)},d(e.$t("GLOBAL.GLOBAL_DELETE")),9,ke)])]),r("div",Ae,[r("div",{class:"w-10/12 lg:w-full flex lg:flex-wrap cursor-pointer lg:text-lg",onClick:e=>((e="")=>{e&&P.push({name:"LineSetEdit",query:{lineID:e}})})(l.lineId)},[r("div",Pe,d((ll.value.rightNowPage-1)*ll.value.amountData+a+1)+". ",1),r("div",Se,[r("span",Ie,d(e.$t("Line.LINE_LINE"))+" :",1),f(" "+d(l.lineName),1)]),r("div",Ee,[r("span",De,d(e.$t("Line.LINE_NOWPRODUCT"))+" :",1),f(" "+d(l.nowProduct),1)]),r("div",Oe,[r("span",Te,d(e.$t("Line.LINE_MACHINETOTAL"))+" :",1),f(" "+d(l.machineTotal),1)])],8,Ne),r("div",Be,[r("span",_e,d(e.$t("Line.LINE_PRODUCTUPDATE"))+" :",1),r("span",$e,[r("button",{class:"btn btnBlueColor",onClick:m((e=>(e=>{if(B.commit("onClickAwayHam"),B.commit("onClickAwayGear"),B.commit("onClickAwayAdmin"),B.commit("onClickAwayLang"),Ze.value[e]){let l=Ze.value[e].isShowProductChange;gl(),Ze.value[e].isShowProductChange=!l}})(a)),["stop"])},[r("span",null,[f(d(e.$t("GLOBAL.GLOBAL_UPDATE"))+" ",1),Ge])],8,je),l.isShowProductChange?(b(),u("div",Re,[r("div",Ue,[l.ProductChange.theLength>0?(b(),u("div",Fe,[(b(!0),u(w,null,y(l.ProductChange.productName,((e,a)=>(b(),u("ul",{key:"productName"+a},[e?(b(),u("li",We,[k(t,{to:{name:"ProductLineEdit",query:{clpId:l.ProductChange.clpId[a]}}},{default:A((()=>[f(d(e),1)])),_:2},1032,["to"])])):h("",!0)])))),128))])):(b(),u("div",He,[r("ul",Me,[r("li",Je,d(e.$t("Line.LINE_NA")),1)])]))])])):h("",!0)])])])],2)))),128))])])])])}}},[["__scopeId","data-v-3891c34d"]]);export{qe as default};
