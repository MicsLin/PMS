import{g as e,c as l,u as t,y as a,k as s,l as n,m as r,a as u,d as i,t as o,B as c,j as d,i as p,z as m,G as v,F as f,q as b,H as g,s as S,x as y,o as x,n as w,f as h,e as U}from"./vendor.5e620042.js";import{_ as E,l as k,s as T,a as I}from"./index.647400d6.js";import{P as L}from"./pagesPermitList.c6dba664.js";const G=e=>(S("data-v-5437328f"),e=e(),y(),e),D={class:"mainPaddingX"},_={class:"flex sm:block py-4 sm:mb-4 text-4xl text-title-h1"},N={class:"flex lg:block justify-between mb-5"},A={class:"mr-5 lg:mr-0 lg:mb-5 w-6/12 lg:w-full shadow myBorder theHeight"},P={class:"flex items-center h-16 pl-8 sm:pl-4 titleStyle border-b"},C={class:"flex items-center text-xl"},O=G((()=>i("i",{class:"pe-7s-add-user pe-lg pe-va"},null,-1))),$={class:"ml-3"},B={class:"px-4 sm:px-2 py-6 sm:py-4 text-white text-sm"},R={class:"flex"},j=["placeholder"],M=["placeholder"],V={class:"flex my-2"},q=["placeholder"],H=["placeholder"],z={class:"flex my-2"},W={class:"mr-2 w-full"},F={value:"",disabled:"",hidden:""},X=["value"],Y={class:"w-full"},J={value:"",disabled:"",hidden:""},K=["value"],Q={class:"my-2 w-full"},Z={class:"tableThStyle"},ee={class:"py-3 pl-2 text-left"},le={class:"flex items-center tableBorderStyle py-3 pl-2 tableHover"},te={for:"check_all",class:"w-full cursor-pointer"},ae={class:"px-8 lg:px-4 py-4 overflow-hidden tableBorderStyle"},se={class:"flex flex-wrap"},ne=["id","value"],re=["for"],ue={type:"submit",class:"mr-2 btn btnBlueColor"},ie=["onClick"],oe={class:"w-6/12 lg:w-full lg:shadow myBorder theHeight"},ce={class:"flex items-center h-16 pl-8 sm:pl-4 titleStyle border-b"},de={class:"flex items-center text-xl"},pe=G((()=>i("i",{class:"pe-7s-users pe-lg pe-va"},null,-1))),me={class:"ml-3"},ve={class:"px-4 sm:px-2 py-6 sm:py-4 text-white text-sm"},fe={class:"flex items-center mb-2"},be=["placeholder"],ge={type:"submit",class:"absolute right-0 btn btnSearchColor"},Se={key:0},ye={key:1},xe={class:"mt-5"},we={class:"w-full"},he={class:"tableThStyle"},Ue={class:"w-2/12 lg:w-3/12"},Ee=["onClick"],ke={class:"tableBorderStyle"},Te={key:0,class:"flex justify-center items-center"},Ie=["onClick"],Le={class:"w-full h-full shadow myBorder"},Ge={class:"w-full shadow"},De={class:"flex items-center h-16 pl-8 sm:pl-4 titleStyle border-b text-xl"},_e=G((()=>i("i",{class:"pe-7s-id pe-lg pe-va"},null,-1))),Ne={class:"ml-3 mr-1"},Ae={class:"px-4 sm:px-2 py-6 sm:py-4 text-white text-sm"},Pe={class:"flex sm:flex-wrap items-center justify-between mb-4 w-full"},Ce={class:"flex items-center mb-1"},Oe=["placeholder"],$e={class:"lg:hidden mb-2 flex w-full text-white tableThStyle"},Be={class:"w-full flex"},Re={class:"w-full flex"},je=G((()=>i("div",{class:"lg:hidden w-1/12 text-center overflow-hidden"},null,-1))),Me={class:"w-3/12 text-center overflow-hidden"},Ve={class:"w-3/12 text-center overflow-hidden"},qe={class:"w-full text-center overflow-hidden"},He={class:"w-1/12 flex justify-center"},ze={class:"w-full text-center overflow-hidden"},We={class:"w-full"},Fe={class:"w-1/12 lg:w-full py-2 lg:pt-0 lg:px-4 flex lg:flex-wrap justify-center lg:justify-between"},Xe={class:"hidden lg:block w-2/12 text-lg"},Ye={class:"w-full lg:w-auto flex lg:flex-wrap justify-center lg:justify-start"},Je={class:"w-full lg:w-auto flex justify-center mb-1"},Ke=["onClick"],Qe={class:"w-full flex lg:block"},Ze=["onClick"],el={class:"lg:hidden w-1/12 flex justify-end items-center"},ll={class:"w-3/12 lg:w-full flex lg:block lg:px-4 justify-center items-center"},tl={class:"hidden lg:inline-block mr-1"},al={class:"w-3/12 lg:w-full flex lg:block lg:px-4 justify-center items-center"},sl={class:"hidden lg:inline-block mr-1"},nl={class:"w-full flex lg:block lg:px-4 items-center"},rl={class:"flex flex-wrap overflow-hidden"},ul={class:"hidden lg:inline-block mr-1 lg:w-full"},il={key:0};var ol=E({setup(S){const y=e(),E=l((()=>y.locale.value)),G=t(),ol=a();s(),l((()=>G.state.resData.token)),l((()=>G.state.serverURL));const cl=["0","12"],dl=()=>{let e=I(E.value);return{confirm:(l=(()=>{}))=>{let t=e.confirmDelete;confirm(t)&&l()},success:()=>{let l=e.deleteSuccess;alert(l)}}},pl=l((()=>L[E.value]||[])),ml=n({id:[],name:[],initailData:{}});class vl{constructor(e){this.adminId=e.adminId||"",this.adminName=e.adminName||"",this.groupName=e.groupName||"",this.pagesPermit=e.pagesPermit||[void 0]}}const fl=n({id:[],info:[],initialData:{},filterInfo:[]}),bl=(e=[])=>{let l=[...e];return l.map((e=>{e.pagesPermitTranslation=((e="")=>{let l=[];e&&"string"==typeof e&&e.split(",").forEach((e=>{Number(e)&&Number(e)!=1/0&&l.push(pl.value[Number(e)-1])}));return l})(e.pagesPermit)})),l},gl=(e=(()=>{}))=>{let l=G.state.fakeData.adminSetUserSet;ml.value.id=Object.keys(l.adminGroup),ml.value.name=Object.values(l.adminGroup),ml.value.initialData=l.adminGroup;let t=Object.keys(l.adminData),a=l.adminData;fl.value.id=t,fl.value.initialData=a,fl.value.info=function(){let e=[];return t.forEach((l=>{let t={adminId:a[l].adminId,adminName:a[l].adminName,groupName:a[l].groupName,pagesPermit:a[l].pagesPermit},s=new vl(t);e.push(s)})),e}(),fl.value.filterInfo=bl(fl.value.info),e()};gl();const Sl=n(ol.params.UserName||"");r((()=>Sl.value),(e=>{e&&setTimeout((()=>{Sl.value=""}),31e3)}));const yl=n(""),xl=()=>{yl.value="",fl.value.filterInfo=bl(fl.value.info)},wl=()=>{if(!yl.value)return xl();let e=T(yl.value,fl.value.info,"adminName");fl.value.filterInfo=bl(e)};r((()=>E.value),(()=>{fl.value.filterInfo=bl(fl.value.filterInfo)}));const hl=n(""),Ul=n(""),El=n(""),kl=n(""),Tl=n(""),Il=n(""),Ll=n([...cl]),Gl=l((()=>({userGroup:{tw:"選擇群組",cn:"选择群组",jp:"グループを選択する",en:"Select Group"}[E.value]||"",userLanguage:{tw:"選擇語言",cn:"选择语言",jp:"言語を選択してください",en:"Choose a language"}[E.value]||""}))),Dl=l((()=>k)),_l=n(!1),Nl=(e=!1)=>{_l.value=!_l.value,e&&"boolean"==typeof e&&(_l.value=!0),Ll.value=((e=!1,l=[])=>e?cl:[...new Set([...l,...cl])])(!0),_l.value&&(Ll.value=pl.value.map(((e,l)=>l.toString())))},Al=()=>{hl.value="",Ul.value="",El.value="",kl.value="",Tl.value="",Il.value="",_l.value=!1,Ll.value=[...cl]},Pl=n(!1);r((()=>Pl.value),(e=>{e&&setTimeout((()=>{Pl.value=!1}),31e3)}));const Cl=()=>{},Ol=n(!0),$l=n(""),Bl=n("");let Rl;r((()=>Bl.value),(e=>{Rl&&clearTimeout(Rl),e&&(Rl=setTimeout((()=>{Bl.value="",Rl=null}),31e3))}));const jl=n(""),Ml=()=>{Ol.value=!0,jl.value="",$l.value=""},Vl=()=>{};return(e,l)=>(x(),u("main",D,[i("h1",_,o(e.$t("UserSet.USET_USERSETTING")),1),i("div",N,[i("div",A,[i("div",P,[i("span",C,[O,i("span",$,o(e.$t("UserSet.USET_ADDINGUSER")),1)])]),i("div",B,[i("form",{onSubmit:l[10]||(l[10]=c(((...e)=>d(Cl)&&d(Cl)(...e)),["prevent"]))},[i("div",R,[p(i("input",{type:"text",class:"mr-2 form-control myInput w-full",placeholder:e.$t("UserSet.USET_USERNAME"),"onUpdate:modelValue":l[0]||(l[0]=e=>hl.value=e),required:""},null,8,j),[[m,hl.value]]),p(i("input",{type:"text",class:"form-control myInput w-full",placeholder:e.$t("UserSet.USET_EMPLOYEEID"),"onUpdate:modelValue":l[1]||(l[1]=e=>Ul.value=e),required:""},null,8,M),[[m,Ul.value]])]),i("div",V,[p(i("input",{type:"text",class:"mr-2 form-control myInput w-full",placeholder:e.$t("UserSet.USET_ACCOUNT"),"onUpdate:modelValue":l[2]||(l[2]=e=>El.value=e),required:""},null,8,q),[[m,El.value]]),p(i("input",{type:"password",class:"form-control myInput w-full",placeholder:e.$t("UserSet.USET_PASSWORD"),"onUpdate:modelValue":l[3]||(l[3]=e=>kl.value=e),required:""},null,8,H),[[m,kl.value]])]),i("div",z,[i("div",W,[p(i("select",{class:"w-full myInputSearch","onUpdate:modelValue":l[4]||(l[4]=e=>Tl.value=e),required:""},[i("option",F,o(d(Gl).userGroup),1),(x(!0),u(f,null,b(ml.value.name,((e,l)=>(x(),u("option",{value:ml.value.id[l],key:"AdminGroup"+l},o(e),9,X)))),128))],512),[[v,Tl.value]])]),i("div",Y,[p(i("select",{class:"w-full myInputSearch","onUpdate:modelValue":l[5]||(l[5]=e=>Il.value=e),required:""},[i("option",J,o(d(Gl).userLanguage),1),(x(!0),u(f,null,b(d(Dl),((e,l)=>(x(),u("option",{key:"language"+l,value:e.key},o(e.description),9,K)))),128))],512),[[v,Il.value]])])]),i("table",Q,[i("thead",null,[i("tr",Z,[i("th",ee,o(e.$t("UserSetEdit.UEDIT_PAGEPERMISSION")),1)])]),i("tbody",null,[i("tr",null,[i("td",le,[p(i("input",{type:"checkbox",id:"check_all",class:"mr-2 cursor-pointer",onClick:l[6]||(l[6]=e=>Nl()),"onUpdate:modelValue":l[7]||(l[7]=e=>_l.value=e)},null,512),[[g,_l.value]]),i("label",te,o(e.$t("UserSet.USET_SELECTALL")),1)])]),i("tr",null,[i("td",ae,[i("ul",se,[(x(!0),u(f,null,b(d(pl),((e,t)=>(x(),u("li",{class:w(["flex items-center mb-1 w-2/6 sm:w-6/12",["不使用"==e?"hidden":""]]),key:"pagesPermitArray"+t},[p(i("input",{type:"checkbox",class:"mr-2 cursor-pointer",id:"check"+t,value:t,onChange:l[8]||(l[8]=e=>_l.value=Ll.value.length==pl.value.length),"onUpdate:modelValue":l[9]||(l[9]=e=>Ll.value=e)},null,40,ne),[[g,Ll.value]]),i("label",{for:"check"+t,class:"cursor-pointer"},o(e),9,re)],2)))),128))])])])])]),i("div",null,[i("button",ue,o(e.$t("UserSet.USET_SUBMIT")),1),i("button",{type:"button",class:"btn btnGrayColor",onClick:c(Al,["prevent"])},o(e.$t("UserSet.USET_RESET")),9,ie)])],32)])]),i("div",oe,[i("div",ce,[i("span",de,[pe,i("span",me,o(e.$t("UserSet.USET_ADDINGGROUP")),1)])]),i("div",ve,[i("div",fe,[i("form",{class:"relative w-full",onSubmit:l[12]||(l[12]=c(((...e)=>d(Vl)&&d(Vl)(...e)),["prevent"]))},[p(i("input",{type:"text",placeholder:e.$t("UserSet.USET_ADDINGGROUP"),class:"form-control myInput w-full","onUpdate:modelValue":l[11]||(l[11]=e=>$l.value=e),required:""},null,8,be),[[m,$l.value,void 0,{lazy:!0}]]),i("button",ge,[Ol.value?(x(),u("span",Se,o(e.$t("UserSet.USET_ADD")),1)):(x(),u("span",ye,o(e.$t("GLOBAL.GLOBAL_EDIT")),1))])],32)]),i("div",xe,[i("table",we,[i("thead",null,[i("tr",he,[i("th",{class:"py-3 hover:bg-gray-800 cursor-pointer",onClick:Ml},o(e.$t("UserSet.USET_GROUPNAME")),1),i("th",Ue,o(e.$t("GLOBAL.GLOBAL_DELETE")),1)])]),i("tbody",null,[(x(!0),u(f,null,b(ml.value.name,((l,t)=>(x(),u("tr",{key:"adminGroup"+t,class:w([l==Bl.value?"isNewBgColor":""])},[i("td",{class:"tableBorderStyle px-2 py-3 tableHover cursor-pointer",onClick:e=>(e=>{Ol.value=!1,jl.value=ml.value.id[e],$l.value=ml.value.name[e]})(t)},o(l),9,Ee),i("td",ke,[t>0?(x(),u("div",Te,[i("button",{class:"btn btnRedColor",onClick:e=>(e=>{let l=dl();l.confirm((()=>{let t=ml.value.id[e];G.state.fakeData.adminSetUserSet.adminGroup[t]&&(delete G.state.fakeData.adminSetUserSet.adminGroup[t],l.success(),gl(),Ml())}))})(t)},o(e.$t("GLOBAL.GLOBAL_DELETE")),9,Ie)])):h("",!0)])],2)))),128))])])])])])]),i("div",Le,[i("div",Ge,[i("div",De,[_e,i("span",Ne,o(e.$t("GLOBAL.GLOBAL_LIST")),1),i("span",null," ( "+o(fl.value.filterInfo.length)+" )",1)]),i("div",Ae,[i("div",Pe,[i("div",Ce,[p(i("input",{type:"text",class:"myInput rounded-r-none w-60 sm:w-auto text-gray-500",placeholder:e.$t("UserSet.USET_USERNAME"),"onUpdate:modelValue":l[13]||(l[13]=e=>yl.value=e)},null,8,Oe),[[m,yl.value]]),i("button",{type:"button",class:"btn btnSearchColor",onClick:wl},o(e.$t("Product.PRO_SEARCHBTN")),1)]),i("button",{type:"button",class:"btn btnBlueColor mb-1",onClick:xl},o(e.$t("Product.PRO_SHOWALL")),1)]),i("div",$e,[i("div",Be,[i("div",Re,[je,i("div",Me,o(e.$t("UserSet.USET_USERNAME")),1),i("div",Ve,o(e.$t("UserSet.USET_GROUP")),1),i("div",qe,o(e.$t("UserSetEdit.UEDIT_PAGEPERMISSION")),1)])]),i("div",He,[i("div",ze,o(e.$t("GLOBAL.GLOBAL_DELETE")),1)])]),i("div",We,[(x(!0),u(f,null,b(fl.value.filterInfo,((l,t)=>(x(),u("div",{key:"singleData"+t,class:w(["py-2 lg:py-5 lg:mb-6 flex lg:block flex-row-reverse tableHover text-white border-t lg:shadow-lg border-gray-800 rounded",[l.adminName==Sl.value?"isNewBgColor":""]])},[i("div",Fe,[i("div",Xe,o(t+1)+". ",1),i("div",Ye,[i("div",Je,[i("button",{type:"button",class:"btn btnRedColor",onClick:e=>function(e){let l=dl();l.confirm((()=>{G.state.fakeData.adminSetUserSet.adminData[e]&&(delete G.state.fakeData.adminSetUserSet.adminData[e],l.success(),gl(wl),Sl.value="")}))}(l.adminId)},o(e.$t("GLOBAL.GLOBAL_DELETE")),9,Ke)])])]),i("div",Qe,[i("div",{class:"w-full lg:w-full flex lg:flex-wrap cursor-pointer lg:text-lg",onClick:e=>{l.adminId}},[i("div",el,o(t+1)+". ",1),i("div",ll,[i("span",tl,o(e.$t("UserSet.USET_USERNAME"))+" :",1),U(" "+o(l.adminName),1)]),i("div",al,[i("span",sl,o(e.$t("UserSet.USET_GROUP"))+" :",1),U(" "+o(l.groupName),1)]),i("div",nl,[i("div",rl,[i("span",ul,[i("span",null,o(e.$t("UserSetEdit.UEDIT_PAGEPERMISSION"))+" :",1)]),i("div",null,[(x(!0),u(f,null,b(l.pagesPermitTranslation,((e,t)=>(x(),u("span",{key:"pagesPermit"+t,class:"lg:border-b"},[i("span",{class:w("不使用"==e?"hidden":"")},o(e),3),t<l.pagesPermitTranslation.length-1&&"不使用"!=e?(x(),u("span",il,", ")):h("",!0)])))),128))])])])],8,Ze)])],2)))),128))])])])])]))}},[["__scopeId","data-v-5437328f"]]);export{ol as default};
